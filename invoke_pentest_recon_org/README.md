# invoke_pentest_recon_org

Script to recon domains, IPs and other assets for an organization.

There is a script available to find related higher level domains for an organization via `generate_seed.sh` and `generate_seed.cnf`

To further enumerate the subdomains for discovered in the seed, the `enum_subdomains.sh` script has been provided 

## Setup

### via docker

We leverage docker as follows to build the container:

```
docker build -t invoke_pentest_recon_org:latest .
```

Copy `generate_seed.cnf` file to `in_generate_seed.cnf` file and update the `WHOXY_API_KEY` in `in_generate_seed.cnf`. Update any other configuration settings as necessary in `in_generate_seed.cnf` file as well eg `OUTFILE`

Add any domains to be manually appended to the output `in_manual_domains.txt`

## Usage

Execute the command below to identify the seed domains. Replace `$COMPANY_NAMES` with the different names of the company (eg identified via `whois` recommendation) AND domains with the different domains for the company (eg identified as the main domains of the organization).

```
docker run -v $(pwd):/data -it invoke_pentest_recon_org:latest generate_seed.sh $COMPANY_NAMES $COMPANY_DOMAINS
```

Some nameservers may deliberately lead to dns domain resolution, for which we may wish to exclude 

To identify such domains, we can get stats on number of domains identified for 2nd level domains (subdomains of ccTLD) - the domains which have excessive number of subdomains are likely the offending domains:
```
cat out-domains.csv | grep -ioE "[a-zA-Z0-9\-]+\.[a-zA-Z\.\-]{2,6}$" | sort | uniq -c | sort -nr | less
```

To execute the subdomain enumeration on IPs & domains list, we run the following command:
```
docker run -d --rm -v $(pwd):/data -it invoke_pentest_recon_org:latest enum_subdomains.sh in-edg-domains.txt in-edg-ips.txt
```

The script has a threshold defined to ignore if excessive number of subdomains discovered from dnscan/dnsx enumeration for subdomains.